INVWIN	PROC
	;IN
	;DS:BX - éäéççÄü íÄÅãàñÄ

	PUSH	AX
	MOV	AL,BYTE PTR CS:[VTBL+8]
	CMP	AL,BYTE PTR DS:[BX+8]
	JNE	INVWINE
	PUSH	BX
	PUSH	CX
	PUSH	DX
	PUSH	SI
	PUSH	DI
	PUSH	BP
	PUSH	DS
	PUSH	ES
	MOV	CL,3
	MOV	AX,DS:[BX+4]
	MOV	DX,WORD PTR CS:[VTBL+6]
	SHR	DX,CL
	MOV	BP,DX
	MUL	DX
	MOV	DX,DS:[BX+6]
	SHR	DX,CL
	ADD	AX,DX
	MOV	DX,DS:[BX+2]
	SHR	DX,CL
	MOV	CX,DS:[BX]
	LDS	SI,DWORD PTR CS:[VTBL]
	ADD	SI,AX
	LEA	DI,INVWINBUF1
	PUSH	CS
	POP	ES
INVWIN2:
	PUSH	CX
	MOV	CX,DX
INVWIN1:
	PUSH	BP
	PUSH	SI
	PUSH	DI
	PUSH	DS
	PUSH	ES
	MOV	BP,1
	PUSH	SI
	PUSH	DS
	PUSH	DI
	PUSH	ES
	CALL	BWIN2CRD
	POP	DS
	POP	SI
	LEA	DI,INVWINBUF2
	PUSH	DI
	CALL	BCRD2COL
	POP	SI
	CALL	INV
	POP	ES
	POP	DI
	CALL	BCOL2WIN
	POP	ES
	POP	DS
	POP	DI
	POP	SI
	POP	BP
	ADD	SI,BP
	LOOP	INVWIN1
	POP	CX
	LOOP	INVWIN2
	POP	ES
	POP	DS
	POP	BP
	POP	DI
	POP	SI
	POP	DX
	POP	CX
	POP	BX
	POP	AX
	RET
INVWINE:
	STC
	POP	AX
	RET
INV	PROC
	PUSH	AX
	PUSH	CX
	PUSH	DI
	MOV	CX,4
INV1:
	MOV	AL,ES:[DI]
	NOT	AL
	STOSB
	LOOP	INV1
	POP	DI
	POP	CX
	POP	AX
	RET
ENDP

INVWINBUF1	DB	0,0,0,0
INVWINBUF2	DB	0,0,0,0
ENDP



