WIN2CRD PROC
	;IN
	;DS:BX - éäéççÄü íÄÅãàñÄ
	;ES:DI - äÄêíàçéóçÄü íÄÅãàñÄ

	PUSH	AX
	MOV	AL,BYTE PTR CS:[VTBL+8]
	CMP	AL,DS:[BX+8]
	JNE	WIN2CRDE
	PUSH	AX
	PUSH	BX
	PUSH	CX
	PUSH	DX
	PUSH	SI
	PUSH	DI
	PUSH	BP
	PUSH	DS
	PUSH	ES
	MOV	AX,DS:[BX+4]
	MOV	ES:[DI+8],AX
	MOV	DX,WORD PTR CS:[VTBL+6]
	MOV	CL,3
	SHR	DX,CL
	MUL	DX
	MOV	DX,DS:[BX+6]
	MOV	ES:[DI+0AH],DX
	SHR	DX,CL
	ADD	AX,DX
	PUSH	AX
	MOV	AX,DS:[BX+2]
	MOV	ES:[DI+6],AX
	SHR	AX,CL
	PUSH	AX
	MOV	CX,DS:[BX]
	MOV	ES:[DI+4],CX
	MUL	CX
	MOV	BP,AX
	POP	DX
	OR	BYTE PTR ES:[DI+0CH],1
	LDS	SI,DWORD PTR CS:[VTBL]
	POP	AX
	ADD	SI,AX
	LES	DI,DWORD PTR ES:[DI]
WIN2CRD2:
	PUSH	CX
	MOV	CX,DX
WIN2CRD1:
	CALL	BWIN2CRD
	INC	SI
	INC	DI
	LOOP	WIN2CRD1
	POP	CX
	LOOP	WIN2CRD2
	POP	ES
	POP	DS
	POP	BP
	POP	DI
	POP	SI
	POP	DX
	POP	CX
	POP	BX
	POP	AX
	POP	AX
	RET
WIN2CRDE:
	POP	AX
	STC
	RET
ENDP