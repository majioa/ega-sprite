BCOL2WIN	PROC
	;IN
	;DS:SI - SOURSE
	;ES:DI - DESTINATION

	PUSH	AX
	PUSH	BX
	PUSH	CX
	PUSH	DX
	PUSH	SI
	PUSH	BP
	MOV	DX,3CEH
	MOV	AX,205H
	OUT	DX,AX
	MOV	AX,3
	OUT	DX,AX
	MOV	BX,8004H
	MOV	CX,8
	XOR	AX,AX
BCOL2WIN2:
	MOV	BP,AX
	MOV	AL,ES:[DI]
	PUSH	CX
	MOV	AL,8
	XCHG	AH,BH
	OUT	DX,AX
	XCHG	AH,BH
	MOV	AX,BP
	TEST	BL,4
	JZ	BCOL2WIN1
	LODSB
BCOL2WIN1:
	XOR	AH,AH
	MOV	CL,4
	SHL	AX,CL
	MOV	ES:[DI],AH
	SHR	BH,1
	XOR	BL,4
	POP	CX
	LOOP	BCOL2WIN2
	POP	BP
	POP	SI
	POP	DX
	POP	CX
	POP	BX
	POP	AX
	RET
ENDP
