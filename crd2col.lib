;FOR I8086
CRD2COL PROC
	;IN
	;DS:BX -  
	;ES:DI -   
	;OUT
	;C - 
	STC
	TEST	BYTE PTR DS:[BX+0CH],1
	JZ	CRD2COLE
	PUSH	AX
	PUSH	BX
	PUSH	CX
	PUSH	DX
	PUSH	SI
	PUSH	DI
	PUSH	BP
	PUSH	DS
	PUSH	ES
	MOV	DX,DS:[BX+6]
	MOV	ES:[DI+6],DX
	MOV	CL,3
	SHR	DX,CL
	MOV	CX,DS:[BX+4]
	MOV	ES:[DI+4],CX
	MOV	AX,CX
	PUSH	DX
	MUL	DX
	POP	DX
	MOV	BP,AX
	LDS	SI,DS:[BX]
	LES	DI,ES:[DI]
	XOR	BH,BH
	MOV	BL,BYTE PTR CS:[VTBL+8]
CRD2COL2:
	PUSH	CX
	MOV	CX,DX
CRD2COL1:
	CALL	BCRD2COL
	INC	SI
	ADD	DI,4
	LOOP	CRD2COL1
	POP	CX
	LOOP	CRD2COL2
	POP	ES
	POP	DS
	POP	BP
	POP	DI
	POP	SI
	POP	DX
	POP	CX
	POP	BX
	POP	AX
	AND	BYTE PTR ES:[DI+0Ch],11111110B
	CLC
CRD2COLE:
	RET
ENDP
