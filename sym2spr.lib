SYM2SPR PROC
	;DS:SI - SYMBOL TABLE
	;ES:DI - SPRITE
	;AL - SYMBOL
	;AH - ‚›‘Ž’€
	;BL - INK
	;BH - PAPER
	;DX - ŠŽ‹-‚Ž –‚…’Ž‚(EGA=4)

	PUSH	CX
	PUSH	DX
	PUSH	BP
	MOV	BP,DX
	PUSH	AX
	MOV	CL,AH
	XOR	AH,AH
	MOV	CH,AH
	MUL	CX
	ADD	SI,AX
	POP	AX
	MOV	CL,AH
	MOV	DH,CH
SYM2SPR5:
	PUSH	CX
	MOV	CX,8
	LODSB
SYM2SPR3:
	RCL	AL,1
	CALL	SYM2SPRCOLOR
	LOOP	SYM2SPR3
	POP	CX
	LOOP	SYM2SPR5
	POP	BP
	POP	DX
	POP	CX
	RET
SYM2SPR_FLAGS	DB	0
ENDP
SYM2SPRCOLOR	PROC
	PUSH	AX
	MOV	DL,BL
	JC	SYM2SPR1
	MOV	DL,BH
SYM2SPR1:
	PUSH	CX
	MOV	CX,BP
	TEST	CS:[SYM2SPR_FLAGS],1
	JNZ	SYM2SPR2
	SHL	DX,CL
	MOV	DH,DL
	OR	CS:[SYM2SPR_FLAGS],1
	JMP	SHORT	SYM2SPR4
SYM2SPR2:
	AND	CS:[SYM2SPR_FLAGS],11111110B
	OR	DH,DL
	MOV	AL,DH
	XOR	DH,DH
	STOSB
SYM2SPR4:
	POP	CX
	POP	AX
	RET
ENDP